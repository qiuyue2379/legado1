(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"392a":function(t,e,s){},"7b5b":function(t,e,s){},b41e:function(t,e,s){"use strict";s("392a")},d504:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"index-wrapper"},[e("div",{staticClass:"navigation-wrapper"},[t._m(0),e("div",{staticClass:"search-wrapper"},[e("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"搜索书架书籍"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e("div",{staticClass:"bottom-wrapper"},[e("div",{staticClass:"recent-wrapper"},[e("div",{staticClass:"recent-title"},[t._v("最近阅读")]),e("div",{staticClass:"reading-recent"},[e("el-tag",{staticClass:"recent-book",class:{"no-point":""==t.readingRecent.url},attrs:{type:"尚无阅读记录"==t.readingRecent.name?"warning":"tip"},on:{click:function(e){return t.toDetail(t.readingRecent.url,t.readingRecent.name,t.readingRecent.author,t.readingRecent.chapterIndex,t.readingRecent.chapterPos)}}},[t._v(" "+t._s(t.readingRecent.name)+" ")])],1)]),e("div",{staticClass:"setting-wrapper"},[e("div",{staticClass:"setting-title"},[t._v("基本设定")]),e("div",{staticClass:"setting-item"},[e("el-tag",{staticClass:"setting-connect",class:{"no-point":t.newConnect},attrs:{type:t.connectType},on:{click:t.setIP}},[t._v(" "+t._s(t.connectStatus)+" ")])],1)])]),e("div",{staticClass:"bottom-icons"},[e("a",{attrs:{href:"https://github.com/gedoor/legado_web_bookshelf",target:"_blank"}},[e("div",{staticClass:"bottom-icon"},[e("img",{attrs:{src:s("fa39"),alt:""}})])])])]),e("div",{ref:"shelfWrapper",staticClass:"shelf-wrapper"},[e("div",{staticClass:"books-wrapper"},[e("div",{staticClass:"wrapper"},t._l(t.shelf,(function(s){return e("div",{key:s.noteUrl,staticClass:"book",on:{click:function(e){return t.toDetail(s.bookUrl,s.name,s.author,s.durChapterIndex,s.durChapterPos)}}},[e("div",{staticClass:"cover-img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getCover(s.coverUrl),expression:"getCover(book.coverUrl)"}],key:s.coverUrl,staticClass:"cover",attrs:{alt:""}})]),e("div",{staticClass:"info",on:{click:function(e){return t.toDetail(s.bookUrl,s.name,s.author,s.durChapterIndex,s.durChapterPos)}}},[e("div",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"sub"},[e("div",{staticClass:"author"},[t._v(" "+t._s(s.author)+" ")]),e("div",{staticClass:"dot"},[t._v("•")]),e("div",{staticClass:"size"},[t._v("共"+t._s(s.totalChapterNum)+"章")]),e("div",{staticClass:"dot"},[t._v("•")]),e("div",{staticClass:"date"},[t._v(t._s(t.dateFormat(s.lastCheckTime)))])]),e("div",{staticClass:"dur-chapter"},[t._v("已读："+t._s(s.durChapterTitle))]),e("div",{staticClass:"last-chapter"},[t._v(" 最新："+t._s(s.latestChapterTitle)+" ")])])])})),0)])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"navigation-title-wrapper"},[e("div",{staticClass:"navigation-title"},[t._v("阅读")]),e("div",{staticClass:"navigation-sub-title"},[t._v("清风不识字，何故乱翻书")])])}],i=(s("14d9"),s("7b5b"),s("b3f5")),n={data(){return{search:"",readingRecent:{name:"尚无阅读记录",author:"",url:"",chapterIndex:0,chapterPos:0}}},mounted(){let t=localStorage.getItem("readingRecent");null!=t&&(this.readingRecent=JSON.parse(t),"undefined"==typeof this.readingRecent.chapterIndex&&(this.readingRecent.chapterIndex=0)),this.loading=this.$loading({target:this.$refs.shelfWrapper,lock:!0,text:"正在获取书籍信息",spinner:"el-icon-loading",background:"rgb(247,247,247)"}),this.$store.dispatch("saveBookProcess").then(()=>this.$store.commit("clearReadingBook")).finally(()=>this.fetchBookShelfData())},methods:{setIP(){},toDetail(t,e,s,a,r){sessionStorage.setItem("bookUrl",t),sessionStorage.setItem("bookName",e),sessionStorage.setItem("bookAuthor",s),sessionStorage.setItem("chapterIndex",a),sessionStorage.setItem("chapterPos",r),this.readingRecent={name:e,author:s,url:t,chapterIndex:a,chapterPos:r},localStorage.setItem("readingRecent",JSON.stringify(this.readingRecent)),this.$router.push({path:"/chapter"})},dateFormat(t){let e=(new Date).getTime(),s=parseInt((e-t)/1e3),a="";return Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t},a=s<=30?"刚刚":s<60?s+"秒前":s<3600?parseInt(s/60)+"分钟前":s<86400?parseInt(s/3600)+"小时前":s<2592e3?parseInt(s/86400)+"天前":new Date(t).format("yyyy-MM-dd"),a},getCover(t){return/^data:/.test(t)?t:"../cover?path="+encodeURIComponent(t)},fetchBookShelfData(){const t=this;i["a"].get("/getBookshelf",{timeout:5e3}).then((function(e){t.loading.close(),t.$store.commit("setConnectType","success"),e.data.isSuccess?t.$store.commit("addBooks",e.data.data.sort((function(t,e){var s=t["durChapterTime"]||0,a=e["durChapterTime"]||0;return a-s}))):t.$message.error(e.data.errorMsg),t.$store.commit("setConnectStatus","已连接 "),t.$store.commit("setNewConnect",!1)})).catch((function(e){throw t.loading.close(),t.$store.commit("setConnectType","danger"),t.$store.commit("setConnectStatus","连接失败"),t.$message.error("后端连接失败"),t.$store.commit("setNewConnect",!1),e}))}},computed:{shelf(){let t=this.$store.state.shelf;return t.filter(t=>""==this.search||(t.name.includes(this.search)||t.author.includes(this.search)))},connectStatus(){return this.$store.state.connectStatus},connectType(){return this.$store.state.connectType},newConnect(){return this.$store.state.newConnect},showMenu(){return this.$store.state.miniInterface},navigationClass(){return!this.showMenu||this.showMenu&&this.showNavigation?{display:"block"}:{display:"none"}}}},o=n,c=(s("b41e"),s("2877")),l=Object(c["a"])(o,a,r,!1,null,"5ac2cad5",null);e["default"]=l.exports},fa39:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAECUlEQVRYR7WXTYhcRRDHq3pY9yKrYBQ8KBsjgvHgwRhiQBTjYZm4Xe8NusawhwS/o9GLoKhgBGPAgJd1NdGIXwtZTbRf9Rqzl6gHTVyDeIkIgnEOghAM6oKHzTJd0sO8Zaa338zb7NjwmJn++Ndv+lVVVyOsoM3Ozl69sLBAiHiDc26NUuoKv9w5d14p9aeI/DI4OMgjIyN/lJXFMhOttQ8BgBaR0TLzEXEGAKzW+lCv+V0BmLmGiLtF5M5eQrFxRPxaRCaI6LOi9YUAzPwGADxxMYYjayaJ6MkoZKyTmU8AwF19Mp7LfElEW0LNZTvAzIcBYFufjedy00T0QLt2B4AxZo9S6qX/yXhT1jn3cpqme3IbSwDM/DgAvNlu3Dm3Uyl1HAA2IOJ2EdleEu5Io9H4EBHPVCqVLSISRsMuInrLazUBpqamhoaGhr4TkRsDgLVpmtbzPmPMLQBwOwD4vvzxw8P5IyJztVrtVL4my7L1iPhTx7Yj/jw/P79pfHx8vgmQZdkLiPhK+O8GBgauqVarv5f819FpxpjLlVJ/hYMi8mKSJHubAMz8KwBcF1EYI6IjqwRIlFImonGWiNZhlmVVRDxWYGTVAMx8HwB8EtMXka1orT0gIo9GJrxNRLH+FW8IMx8EgEeW5QDEgx5gTkQ2Bk7yr9b60hVb6rKAmc8BwJWBne+x4P3XiWhtPwGstV9FzpSzHuBvALgsMHaaiDp2ZbUwWZZNIuKuQOcfD7AAAJeEcaq1Xr9ao+3rmdknnscCzQse4LdWEukYazQaa2q12vl+QTDztwCwOdCr+zA8iYi3RQwREdl+ADDz9QDwIwB0OLaInPJRcEhEHoyEyAmt9d39ALDW2lg1hYjv+lfgC4WJgkTxcJIkPcuqbpC+qgKATwvm7PYAGwDgdBeRZ4notYvZCWPMDqXUe13W3to8C6y10yJyv//u6zj/2R6ziPiRiBwt6xPMrBExFZEdRcYR8WOt9bb8MNoKAJ+3Jvtwed05d4dSKtz+c4h4VGsdrRWttZMici8AXFVix+4homNLBUmWZQcQMc/9x4mommXZ84i4t11MKbV5dHR06bxvH5uZmbnZOfdN6O0RmMNE1CxulgCstdeKyBcAcFPrVTyltZ4wxiSVSuXplkhda72zh9P1rClFZFOSJHMdAP5Hq3rxR6eH+IGIvIOuqFlr94nIc10WdRzxy6riAMJnr2nn3JlcME3TppMWNWvtfhF5pmB8WX0RvZgEEEtaYUUbM2KtfUdE/FUubNHipvBmZIxZp5TaDwBprlQGIHLqzSHiPq01x4B7Xk6Z2d8TfDwPlwFozfd1f90598Hi4uKrY2NjFwrzQVkP81nNi/byAWOMv8gOp2n6fhnt/wDqJrRWLmhIrwAAAABJRU5ErkJggg=="}}]);